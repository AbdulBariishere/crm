<style type="text/css">
   html { overflow-y: hidden; }
   a{
   display: block;
   }
    
</style>
<div id="page-top">
   <!-- Navbar -->
 <nav class="navbar navbar-expand navbar-dark bg-color navbar-fixed-top navigation" style="padding: 0px; margin-bottom: 40px;">
  <a class="navbar-brand mr-1 text-dark" href="#">TRACKNOVATE CRM</a>
  <button class="btn btn-link btn-sm text-dark order-1 order-sm-0"  ng-click="myFunc()">
  <i class="fas fa-bars"></i>
  </button>
  <div class="text-white admin-margin"></div>
   
  <ul class="navbar-nav ml-auto ml-md-0">
    <li class="text-dark mr-3" style="font-size: 20px;">{{email}}</li>
    <div class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown"> <i class="fa fa-user-circle fa-2x"></i></a>
      <div class="dropdown-menu marginleft-right">
        <a href="#" class="dropdown-item"><i class="fa fa-user"></i> Profile</a>
        <a href="#" class="dropdown-item" ng-click="Logout()" ><i class="fas fa-power-off" style="cursor: pointer; color: #581845;"></i> Logout</a>
      </div>
    </div>
  </ul>
</nav>
   <!-- Navbar End -->
   <div id="wrapper" class="scroolallpage">
      <!-- Sidebar -->
        <div ng-show="showMe">
    <ul class="sidebar navbar-nav" style="margin-top: 51px;">
      <li class="nav-item active">
        <a class="nav-link" href="adminDashboard">
        <i class="fas fa-fw fa-tachometer-alt"></i><br>
        <span class="sidebaruser">Dashboard</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="users">
        <i class="fas fa-user-plus"></i><br> 
        <span class="sidebaruser">Add user</span>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="AllUsers">
        <i class="fas fa-users"></i><br>
        <span class="sidebaruser">All users</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="reports">
        <i class="fas fa-fw fa-file"></i><br>
        <span class="sidebaruser">History</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="myreports">
        <i class="fas fa-fw fa-file"></i><br>
        <span class="sidebaruser">Reports</span></a>
      </li>
       <li class="nav-item">
        <a class="nav-link" href="supportDashboard">
     <i class="fas fa-phone"></i><br>
        <span class="sidebaruser">support</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="summaryuser">
     <i class="fas fa-fw fa-file"></i><br>
        <span class="sidebaruser">UserSummary</span></a>
      </li>
      
    </ul>
  </div>
      <div id="contents-wrapper">
         <div class="container-fluid">
            <!-- Add user Example -->
            <div class="card mb-1" style="">
               <div class="card-header">
                  <div class="row">
                     <div class="col-lg-2 col-sm-2" style="color: #013188; font-size: 20px; font-weight: 400;">
                        <i class="fas fa-user-clock"></i>
                        User Summary
                     </div>
                  </div>
               </div>
               <div class="card-body">
                  <div class="row">
                     <div class="col-lg-3 col-md-3 col-12">
                        <div class="form-group">
                           <label for="fromDate">Month</label>
                           <select ng-model="month" class="form-control border border-warning "  required>
                              <option value="" selected disabled hidden>Select Month</option>
                              <option value="01">JANUARY</option>
                              <option value="02">FEBRUARY</option>
                              <option value="03">MARCH</option>
                              <option value="04">APRIL</option>
                              <option value="05">MAY</option>
                              <option value="06">JUNE</option>
                              <option value="07">JULY</option>
                              <option value="08">AUGUST</option>
                              <option value="09">SEPTEMBER</option>
                              <option value="10">OCTOBER</option>
                              <option value="11">NOVEMBER</option>
                              <option value="12">DECEMBER</option>
                           </select>
                        </div>
                     </div>
                     <div class="col-lg-2 col-md-2 col-12">
                        <div class="form-group">
                           <label for="ToDate">Year</label>
                           <select ng-model="year" class="form-control border border-warning "  required>
                              <option value="" selected disabled hidden>Select Year</option>
                              <option value="2019">2019</option>
                              <option value="2020">2020</option>
                              <option value="2021">2021</option>
                              <option value="2022">2022</option>
                              <option value="2023">2023</option>
                              <option value="2024">2024</option>
                              <option value="2025">2025</option>
                              <option value="2026">2026</option>
                              <option value="2027">2027</option>
                              <option value="2028">2028</option>
                              <option value="2029">2029</option>
                              <option value="2030">2030</option>
                           </select>
                        </div>
                     </div>
                     <div class="col-lg-2 col-md-2 col-12">
                        <div class="form-group">
                           <label for="users">Users</label>
                           <select ng-model="user" ng-options="x.email for x in allusers" class="form-control border border-warning" >
                              <option value="">All Users</option>
                           </select>
                        </div>
                     </div>
                     <div class="col-lg-2 col-md-2 col-12">
                        <div class="form-group">
                           <button  ng-click="getusersummary(); getusersummary2()" class="button" >
                           <span style="color: black;">View Summary</span>
                           </button>
                        </div>
                     </div>
                     <div class="col-lg-2 col-md-2 col-12">
                        <div class="form-group">
                           <button ng-click="Export()" class="button">
                           <span>Download Summary</span>
                           </button>
                        </div>
                     </div>
                  </div>
                  <div ng-show="showbutton">
                     <div class="row" style="visibility: hidden;" id="visiblebutton">
                        <div class="col-lg-3 col-sm-3"></div>
                        <div class="col-lg-2 col-sm-2"></div>
                        <div class="col-lg-2 col-sm-2"></div>
                        <div class="col-lg-2 col-sm-2">
                           <div class="form-group">
                              <button ng-click="getcreated()" class="button">
                              <span style="color: black;">Created Lead:{{totalcreated}}</span>
                              </button>
                           </div>
                        </div>
                        <div class="col-lg-2 col-sm-2">
                           <div class="form-group">
                              <button ng-click="getmodified()" class="button">
                              <span style="color: black;">Modified Lead:{{totalmodified}}</span>
                              </button>
                           </div>
                        </div>
                     </div>
                  </div>
                  <div class="row">
                     <div class="col-md-12" ng-show="filter_data > 0">
                        <div id="scrolltable">
                           <table id="tblCustomers" class="table table-striped table-bordered table-hover sortable">
                              <thead style="font-size: 11px;">
                                 <tr>
                                    <th>S.No</th>
                                    <th>DATE&nbsp;
                                       <a ng-click="sort_with('owner');">
                                       <i class="fa fa-sort" style="float: right;"></i>
                                       </a>
                                    </th>
                                    <th>CREATED LEAD&nbsp;
                                       <a ng-click="sort_with('number');">
                                       <i class="fa fa-sort" style="float: right;"></i>
                                       </a>
                                    </th>
                                    <th>MODIFIED DATE&nbsp;
                                       <a ng-click="sort_with('subject');">
                                       <i class="fa fa-sort" style="float: right;"></i>
                                       </a>
                                    </th>
                                    <th>MODIFIED LEAD&nbsp;
                                       <a ng-click="sort_with('subject');">
                                       <i class="fa fa-sort" style="float: right;"></i>
                                       </a>
                                    </th>
                                 </tr>
                              </thead>
                              <tbody style="font-size: 12px;">
                                 <tr ng-repeat="data in  file[0]">
                                    <td>{{$index+1}}</td>
                                    <td ng-click="getcreatedDate(data.createddate)">
                                       <div ng-if="data.createddate == undefined" style="color: red;">
                                          No Lead Created On this Date
                                       </div>
                                       <div ng-if="data.createddate != undefined">
                                          <span style="float: right; cursor: pointer;"><i class="fa fa-plus" data-toggle="modal" data-target="#largeModal"></i></span>
                                          {{data.createddate}}
                                       </div>
                                    </td>
                                    <td ng-click="getcreatedDate(data.createddate)">  
                                       {{data.createddatecount}}
                                    </td>
                                    <td ng-click="getmodifiedDate(data.modifieddate)">
                                       <div ng-if="data.modifieddate == undefined" style="color: red;">
                                          No Lead Modified On this Date
                                       </div>
                                       <div ng-if="data.modifieddate != undefined">
                                           <span style="float: right; cursor: pointer;"><i class="fa fa-plus" data-toggle="modal" data-target="#largeModal2"></i></span>
                                          {{data.modifieddate}}
                                       </div>
                                    </td>
                                    <td ng-click="getmodifiedDate(data.modifieddate)">  
                                       {{data.modifieddatecount}}
                                    </td>
                                    <td class="text-center">
                                       <div ng-if="data.status == 'open'">
                                          <img src="./img/open1.png" height="20px" width="50px;">
                                       </div>
                                       <div ng-if="data.status == 'close'|| data.status=='closewithoutsuccess' ||  data.status=='closewithsuccess' ">
                                          <img src="./img/close1.png" height="20px" width="50px;">
                                       </div>
                                    </td>
                                 </tr>
                              </tbody>
                           </table>
                        </div>
                     </div>
                     <div class="col-md-12" ng-show="filter_data == 0">
                        <div class="col-md-12">
                           <h4>No records found..</h4>
                        </div>
                     </div>
                     <div class="col-md-12">
                        <div class="col-md-6 pull-left">
                           <h5>Showing {{ searched.length }} of {{ entire_user}} entries</h5>
                        </div>
                        <div class="col-md-6" ng-show="filter_data > 0">
                           <div pagination="" page="current_grid" on-select-page="page_position(page)" boundary-links="true" total-items="filter_data" items-per-page="data_limit" class="pagination-small pull-right" previous-text="&laquo;" next-text="&raquo;" max-size="9"></div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
      </div>
   </div>
</div>
<div class="modal fade" id="largeModal" tabindex="-1" role="dialog" aria-labelledby="largeModal" aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <h5>Show all Leads</h5>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
         </div>
         <div class="modal-body">
            <div class="card-body">
               <div class="container-fluid">
                     <table class="table sortable">
                  <thead style="font-size: 11px;">
                    <tr>
                      <th>S.no</th>
                   <!--    <th>LeadOwner&nbsp;<a ng-click="sort_with('username');"><i class="fa fa-sort"></i></a></th> -->
                      <th>LeadNumber&nbsp;<a ng-click="sort_with('firstname');"></a></th>
                      <th>Organisation&nbsp;<a ng-click="sort_with('lastname');"></a></th>
                      <th>ClientName&nbsp;<a ng-click="sort_with('contact');"></a></th>
                      <th>City&nbsp;<a ng-click="sort_with('department');"></a></th>
                      <th>Mobile&nbsp;<a ng-click="sort_with('createdBy');"></a></th>
                      <th>Status&nbsp;<a ng-click="sort_with('createdBy');"></a></th>
                      <th>Stage&nbsp;<a ng-click="sort_with('createdBy');"></a></th>
                     
                    </tr>
                  </thead>
                  <!-- ng-if="data.userDepartment=='tracknovate sales' && 'sumit@gmail.com=={{email}}'" -->
                  <tbody style="font-size: 12px;" >
                    <tr ng-repeat="data in searched = (file1 | filter:search | orderBy : base :reverse) | beginning_data:(current_grid-1)*data_limit | limitTo:data_limit">
                      <td>{{$index+1}}</td>
                      <td>{{data.number}}</td>
                      <td>{{data.subject}}</td>
                      <td>{{data.name}}</td>
                      <td>{{data.city}}</td>
                      <td>{{data.mobile}}</td>
                      <td class="text-center">
                        <div ng-if="data.status == 'open'"><img src="./img/open1.png" height="20px" width="50px;"></div>
                        <div ng-if="data.status == 'close'|| data.status=='closewithoutsuccess' ||  data.status=='closewithsuccess' "><img src="./img/close1.png" height="20px" width="50px;"></div>
                      </td>
                      <td>{{data.stage}}</td>
                    </tr>
                  </tbody>
                </table>
               </div>
            </div>
         </div>
         <div class="modal-footer">    
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
           <!--  <button type="submit"  class="btn btn-danger" aria-hidden="true" ng-click="save_user()">Save Changes</button> -->
         </div>
      </div>
   </div>
</div>
<div class="modal fade" id="largeModal2" tabindex="-1" role="dialog" aria-labelledby="largeModal2" aria-hidden="true">
   <div class="modal-dialog modal-lg">
      <div class="modal-content">
         <div class="modal-header">
            <h5>Show all Modified Leads</h5>
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
         </div>
         <div class="modal-body">
            <div class="card-body">
               <div class="container-fluid">
                      <table class="table sortable">
                  <thead style="font-size: 11px;">
                    <tr>
                      <th>S.no</th>
                   <!--    <th>LeadOwner&nbsp;<a ng-click="sort_with('username');"><i class="fa fa-sort"></i></a></th> -->
                      <th>LeadNumber&nbsp;<a ng-click="sort_with('firstname');"></a></th>
                      <th>Organisation&nbsp;<a ng-click="sort_with('lastname');"></a></th>
                      <th>ClientName&nbsp;<a ng-click="sort_with('contact');"></a></th>
                      <th>City&nbsp;<a ng-click="sort_with('department');"></a></th>
                      <th>Mobile&nbsp;<a ng-click="sort_with('createdBy');"></a></th>
                      <th>Status&nbsp;<a ng-click="sort_with('createdBy');"></a></th>
                      <th>Stage&nbsp;<a ng-click="sort_with('createdBy');"></a></th>
                     
                    </tr>
                  </thead>
                  <!-- ng-if="data.userDepartment=='tracknovate sales' && 'sumit@gmail.com=={{email}}'" -->
                  <tbody style="font-size: 12px;" >
                    <tr ng-repeat="data in searched = (file1 | filter:search | orderBy : base :reverse) | beginning_data:(current_grid-1)*data_limit | limitTo:data_limit">
                      <td>{{$index+1}}</td>
                      <td>{{data.number}}</td>
                      <td>{{data.subject}}</td>
                      <td>{{data.name}}</td>
                      <td>{{data.city}}</td>
                      <td>{{data.mobile}}</td>
                      <td class="text-center">
                        <div ng-if="data.status == 'open'"><img src="./img/open1.png" height="20px" width="50px;"></div>
                        <div ng-if="data.status == 'close'|| data.status=='closewithoutsuccess' ||  data.status=='closewithsuccess' "><img src="./img/close1.png" height="20px" width="50px;"></div>
                      </td>
                      <td>{{data.stage}}</td>
                    </tr>
                  </tbody>
                </table>
               </div>
            </div>
         </div>
         <div class="modal-footer">    
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
           <!--  <button type="submit"  class="btn btn-danger" aria-hidden="true" ng-click="save_user()">Save Changes</button> -->
         </div>
      </div>
   </div>
</div>